{
  "//": "Config generated by teenybase on 2026-02-17T08:50:12.960Z. Do not modify this file.",
  "tables": [
    {
      "name": "users",
      "fields": [
        {
          "name": "id",
          "sqlType": "text",
          "type": "text",
          "usage": "record_uid",
          "primary": true,
          "notNull": true,
          "noUpdate": true
        },
        {
          "name": "created",
          "sqlType": "timestamp",
          "type": "date",
          "usage": "record_created",
          "notNull": true,
          "default": {
            "q": "CURRENT_TIMESTAMP"
          },
          "noUpdate": true,
          "noInsert": true
        },
        {
          "name": "updated",
          "sqlType": "timestamp",
          "type": "date",
          "usage": "record_updated",
          "notNull": true,
          "default": {
            "q": "CURRENT_TIMESTAMP"
          },
          "noUpdate": true,
          "noInsert": true
        },
        {
          "name": "username",
          "sqlType": "text",
          "type": "text",
          "usage": "auth_username",
          "unique": true,
          "notNull": true
        },
        {
          "name": "email",
          "sqlType": "text",
          "type": "text",
          "usage": "auth_email",
          "unique": true,
          "notNull": true,
          "noUpdate": true
        },
        {
          "name": "email_verified",
          "sqlType": "boolean",
          "type": "bool",
          "usage": "auth_email_verified",
          "notNull": true,
          "default": {
            "l": false
          },
          "noUpdate": true,
          "noInsert": true
        },
        {
          "name": "password",
          "sqlType": "text",
          "type": "text",
          "usage": "auth_password",
          "notNull": true,
          "noSelect": true
        },
        {
          "name": "password_salt",
          "sqlType": "text",
          "type": "text",
          "usage": "auth_password_salt",
          "notNull": true,
          "noUpdate": true,
          "noInsert": true,
          "noSelect": true
        },
        {
          "name": "name",
          "sqlType": "text",
          "type": "text",
          "usage": "auth_name",
          "notNull": true
        },
        {
          "name": "avatar",
          "sqlType": "text",
          "type": "file",
          "usage": "auth_avatar"
        },
        {
          "name": "role",
          "sqlType": "text",
          "type": "text",
          "usage": "auth_audience"
        },
        {
          "name": "meta",
          "sqlType": "json",
          "type": "json",
          "usage": "auth_metadata"
        }
      ],
      "indexes": [
        {
          "fields": "role COLLATE NOCASE"
        }
      ],
      "triggers": [
        {
          "name": "raise_on_created_update",
          "event": "UPDATE",
          "seq": "BEFORE",
          "updateOf": [
            "created"
          ],
          "body": {
            "q": "SELECT RAISE(FAIL, 'Cannot update created column') WHERE OLD.created != NEW.created"
          }
        }
      ],
      "autoSetUid": true,
      "extensions": [
        {
          "name": "rules",
          "listRule": "(auth.uid == id) | auth.role ~ '%admin' | meta->>'$.pvt'!=true",
          "viewRule": "(auth.uid == id) | auth.role ~ '%admin'",
          "createRule": "(auth.uid == null & role == 'guest') | (auth.role ~ '%admin' & role != 'superadmin')",
          "updateRule": "(auth.uid == id & role == new.role & meta == new.meta) | (auth.role ~ '%admin' & new.role != 'superadmin' & (role != 'superadmin' | auth.role = 'superadmin'))",
          "deleteRule": "auth.role ~ '%admin' & role !~ '%admin'"
        },
        {
          "name": "auth",
          "passwordType": "sha256",
          "passwordCurrentSuffix": "Current",
          "passwordConfirmSuffix": "Confirm",
          "jwtSecret": "$JWT_SECRET_USERS",
          "jwtTokenDuration": 10800,
          "maxTokenRefresh": 4,
          "emailTemplates": {
            "verification": {
              "variables": {
                "message_title": "Email Verification",
                "message_description": "Welcome to {{APP_NAME}}. Click the button below to verify your email address.",
                "message_footer": "If you did not request this, please ignore this email.",
                "action_text": "Verify Email",
                "action_link": "{{APP_URL}}#/verify-email/{{TOKEN}}"
              }
            },
            "passwordReset": {
              "variables": {
                "message_title": "Password Reset",
                "message_description": "Click the button below to reset the password for your {{APP_NAME}} account.",
                "message_footer": "If you did not request this, you can safely ignore this email.",
                "action_text": "Reset Password",
                "action_link": "{{APP_URL}}#/reset-password/{{TOKEN}}"
              }
            }
          }
        }
      ]
    },
    {
      "name": "events",
      "fields": [
        {
          "name": "id",
          "sqlType": "text",
          "type": "text",
          "usage": "record_uid",
          "primary": true,
          "notNull": true,
          "noUpdate": true
        },
        {
          "name": "created",
          "sqlType": "timestamp",
          "type": "date",
          "usage": "record_created",
          "notNull": true,
          "default": {
            "q": "CURRENT_TIMESTAMP"
          },
          "noUpdate": true,
          "noInsert": true
        },
        {
          "name": "updated",
          "sqlType": "timestamp",
          "type": "date",
          "usage": "record_updated",
          "notNull": true,
          "default": {
            "q": "CURRENT_TIMESTAMP"
          },
          "noUpdate": true,
          "noInsert": true
        },
        {
          "name": "owner_id",
          "sqlType": "text",
          "type": "relation",
          "notNull": true,
          "foreignKey": {
            "table": "users",
            "column": "id"
          }
        },
        {
          "name": "title",
          "sqlType": "text",
          "type": "text",
          "notNull": true
        },
        {
          "name": "target_date",
          "sqlType": "timestamp",
          "type": "date",
          "notNull": true
        },
        {
          "name": "start_date",
          "sqlType": "timestamp",
          "type": "date",
          "notNull": true
        }
      ],
      "indexes": [
        {
          "fields": "owner_id"
        },
        {
          "fields": "target_date"
        }
      ],
      "triggers": [
        {
          "name": "raise_on_created_update",
          "event": "UPDATE",
          "seq": "BEFORE",
          "updateOf": [
            "created"
          ],
          "body": {
            "q": "SELECT RAISE(FAIL, 'Cannot update created column') WHERE OLD.created != NEW.created"
          }
        }
      ],
      "autoSetUid": true,
      "extensions": [
        {
          "name": "rules",
          "listRule": "auth.uid != null & owner_id == auth.uid",
          "viewRule": "auth.uid != null & owner_id == auth.uid",
          "createRule": "auth.uid != null & owner_id == auth.uid",
          "updateRule": "auth.uid != null & owner_id == auth.uid & owner_id = new.owner_id",
          "deleteRule": "auth.uid != null & owner_id == auth.uid"
        }
      ]
    },
    {
      "name": "kv_store",
      "fields": [
        {
          "name": "key",
          "sqlType": "text",
          "type": "text",
          "primary": true,
          "notNull": true
        },
        {
          "name": "value",
          "sqlType": "json",
          "type": "json",
          "notNull": true
        },
        {
          "name": "expire",
          "sqlType": "timestamp",
          "type": "date"
        }
      ],
      "autoSetUid": false,
      "extensions": []
    }
  ],
  "jwtSecret": "$JWT_SECRET_MAIN",
  "appName": "Dale",
  "appUrl": "https://dale.example.com",
  "email": {
    "from": "Dale <noreply@example.com>",
    "variables": {
      "company_name": "Dale",
      "company_url": "https://example.com",
      "company_address": "Company address",
      "company_copyright": "Dale",
      "support_email": "support@example.com"
    },
    "tags": [
      "dale"
    ],
    "mailgun": {
      "MAILGUN_API_KEY": "$MAILGUN_API_KEY",
      "MAILGUN_API_SERVER": "mail.example.com",
      "MAILGUN_WEBHOOK_SIGNING_KEY": "$MAILGUN_WEBHOOK_SIGNING_KEY",
      "DISCORD_MAILGUN_NOTIFY_WEBHOOK": "xxxxxxxxx"
    }
  },
  "version": 0
}